{"version":3,"sources":["../../../lib/sockets/index.js"],"names":["chat","require","rooms","messages","module","exports","up","io","on","socket","console","log","emit","connection","data","join","room","roomName","users","push","user","to"],"mappings":"AAAA;;AAEA,IAAMA,OAAOC,QAAQ,UAAR,CAAb;;AAEA,IAAIC,QAAQ,EAAZ;AAAA,IACIC,WAAW,EADf;;AAIAC,OAAOC,OAAP,CAAeC,EAAf,GAAoB,UAAUC,EAAV,EAAc;AAC9BA,OAAGC,EAAH,CAAM,YAAN,EAAoB,UAAUC,MAAV,EAAkB;AAClCC,gBAAQC,GAAR,CAAY,sBAAZ;AACAF,eAAOG,IAAP,CAAY,aAAZ,EAA2B,EAACC,YAAY,IAAb,EAA3B;;AAEAJ,eAAOD,EAAP,CAAU,aAAV,EAAyB,UAAUM,IAAV,EAAgB;AACrCL,mBAAOM,IAAP,CAAYD,KAAKE,IAAjB;;AAEA,gBAAIA,OAAO;AACPC,0BAAUH,KAAKE,IADR;AAEPE,uBAAO,EAFA;AAGPf,0BAAU;AAHH,aAAX;AAKAa,iBAAKE,KAAL,CAAWC,IAAX,CAAgBL,KAAKM,IAArB;AACAlB,kBAAMiB,IAAN,CAAWH,IAAX;AACAT,eAAGc,EAAH,CAAML,KAAKC,QAAX,EAAqBL,IAArB,CAA0B,UAA1B,EAAsCE,KAAKE,IAA3C;AACAT,eAAGc,EAAH,CAAML,KAAKC,QAAX,EAAqBL,IAArB,CAA0B,YAA1B,EAAwCE,KAAKM,IAA7C;AAEH,SAbD;;AAeA;;;;;;AASA;;;;;;;;;;;;;;;AAkBH,KA9CD;;AAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,CAzDD","file":"index.js","sourcesContent":["'use strict';\n\nconst chat = require('lib/chat');\n\nlet rooms = [],\n    messages = [];\n\n\nmodule.exports.up = function (io) {\n    io.on('connection', function (socket) {\n        console.log('socket is connected!');\n        socket.emit('testConnect', {connection: true});\n\n        socket.on('create room', function (data) {\n            socket.join(data.room);\n\n            let room = {\n                roomName: data.room,\n                users: [],\n                messages: []\n            };\n            room.users.push(data.user);\n            rooms.push(room);\n            io.to(room.roomName).emit('add room', data.room);\n            io.to(room.roomName).emit('add client', data.user);\n\n        });\n\n        /*socket.on('new message', function (data) {\n            console.log(data.username);\n            console.log(new Date(data.date).getDate());\n            console.log(data.text);\n        });*/\n\n\n\n\n        /*\n                let name = false;\n\n                socket.emit('messages', chat_parts.getLast());\n\n                socket.on('name/set', function(data) {\n                    console.log('set name', name);\n                    name = data;\n                });\n\n                socket.on('message', function(data) {\n                    let message = {\n                        name: data.name,\n                        message: data.message\n                    };\n                    console.log(message);\n                    chat.send(message);\n                });*/\n    });\n\n\n    // module.exports.sendAll = function (eventName, data) {\n    //    io.sockets.emit(eventName, data);\n    // };\n    //\n    // module.exports.sendMessageAll = function (eventName, data) {\n    //    sendAll(eventName, data);\n    // }\n};"]}